{% extends "admin/layouts/base.html" %}
{% load static %}

{% block title %}Weather Chatbot - ClimaChat Admin{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script>
// Make OpenWeather API key available to JavaScript
const OPENWEATHER_API_KEY = "{{ OPENWEATHER_API_KEY }}";
console.log('Admin chat - OPENWEATHER_API_KEY loaded:', OPENWEATHER_API_KEY ? 'Yes' : 'No');
</script>
{% endblock %}

{% block content %}
<div class="mb-6">
    <h1 class="text-3xl font-bold text-gray-900">Weather Chatbot</h1>
    <p class="text-gray-600 mt-2">Test and monitor the weather chatbot responses</p>
</div>

<div class="max-w-6xl mx-auto relative">
    {% include 'admin/components/chat/chat_interface.html' %}
    {% include 'admin/components/chat/user_map_widget.html' %}
    {% include 'admin/components/chat/chat_history_sidebar.html' %}
</div>
{% endblock %}

{% block extra_js %}
<!-- Leaflet JS Library -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<!-- Admin Chat Main JS -->
<script src="{% static 'js/admin/chat.js' %}"></script>
<!-- User Map Widget JS -->
<script src="{% static 'js/admin/user_map_widget.js' %}"></script>
<!-- Chat History Sidebar JS -->
<script src="{% static 'js/admin/chat_history_sidebar.js' %}"></script>
{% endblock %}